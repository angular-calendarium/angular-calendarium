!function(){"use strict";angular.module("ngCalendario",[]).constant("calendarConfig",{formatDay:"d",showWeeks:!0,template:['<div class="calendarium">','<button ng-click="previousMonth()" title="previous month" ><<</button>',"<h1>{{monthLabel}}/{{yearLabel}}</h1>",'<button ng-click="nextMonth()" title="next month" >>></button>','<div class="dates" ng-repeat="date in dates">','<div ng-if="!isDate(date)" class="date empty">{{date.day}}</div>','<div ng-click="selectDate(date)" ng-if="isDate(date)" class="date">{{date.getDate()}}</div>',"</div>","</div>"].join(""),day_labels:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_labels:["January","February","March","April","May","June","July","August","September","October","November","December"],days_in_month:[31,28,31,30,31,30,31,31,30,31,30,31]}).service("calendariumService",["calendarConfig",function(e){var t=this;t.processDateIntervals=function(t,a){var n,o=new Date(t,a,1),r=[];n=e.days_in_month[a],1===a&&(t%4===0&&t%100!==0||t%400===0)&&(n+=1);for(var l=1;n>=l;l++)r.push(l);return{firstWeekDate:o.getDay(),firstDate:o,days:r}}}]).directive("calendarium",["$parse","calendarConfig","calendariumService",function(e,t,a){return{restrict:"EA",replace:!0,scope:{month:"@",year:"@",onDateSelected:"&onDateSelected"},template:t.template,link:function(e){var n=e.onDateSelected();e._year=null===e.year||isNaN(e.year)?(new Date).getFullYear():e.year,e._month=null===e.month||isNaN(e.month)?(new Date).getMonth():e.month,console.log(e._year),console.log(e._month),e.isDate=function(e){return e instanceof Date},e.selectDate=function(e){n(e)},e.previousMonth=function(){console.log(e._month),0===e._month?e._month=11:e._month=e._month-1,e.render()},e.nextMonth=function(){console.log(e._month),11===e._month?e._month=0:e._month=e._month+1,e.render()},e.render=function(){console.log("calls render"),console.log(e._year),console.log(e._month);var n=a.processDateIntervals(e._year,e._month);e.monthLabel=t.month_labels[n.firstDate.getMonth()],e.yearLabel=n.firstDate.getFullYear(),e.dates=[];for(var o=0;o<n.days.length;o++)e.dates.push(new Date(n.firstDate.getFullYear(),n.firstDate.getMonth(),n.days[o]));if(0!==n.firstDate.getDay())for(var r=0;r<n.firstDate.getDay();r++)e.dates.unshift({day:r});e.dates=e.dates},e.render()}}}])}();