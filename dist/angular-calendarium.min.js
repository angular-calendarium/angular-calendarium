!function(){"use strict";angular.module("ngCalendarium",[]).constant("calendarConfig",{showWeeks:!0,template:['<div class="calendarium">','<div class="calendarium-header">','<button ng-click="previousMonth()" title="previous month" ><<</button>',"<h1>{{monthLabel}}/{{yearLabel}}</h1>",'<button ng-click="nextMonth()" title="next month" >>></button>',"</div>",'<div class="month-container">','<div class="week-labels" ng-if="showWeeks">','<div class="week-label" ng-repeat="weekDay in weekDays">{{weekDay}}</div>',"</div>",'<div class="dates" ng-repeat="date in dates">','<div ng-if="!isDate(date)" class="date empty"></div>','<div ng-click="selectDate(date)" ng-if="isDate(date)" class="date">{{date.getDate()}}</div>',"</div>","</div>","</div>"].join(""),day_labels:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_labels:["January","February","March","April","May","June","July","August","September","October","November","December"],days_in_month:[31,28,31,30,31,30,31,31,30,31,30,31]}).service("calendariumService",["calendarConfig",function(e){var t=this;t.processDateIntervals=function(t,a){var n,r=new Date(t,a,1),s=[];n=e.days_in_month[a],1===a&&(t%4===0&&t%100!==0||t%400===0)&&(n+=1);for(var i=1;n>=i;i++)s.push(i);return{firstWeekDate:r.getDay(),firstDate:r,days:s}}}]).directive("calendarium",["$parse","calendarConfig","calendariumService",function(e,t,a){return{restrict:"EA",replace:!0,scope:{month:"@",year:"@",onDateSelected:"&onDateSelected"},template:t.template,link:function(e){var n=e.onDateSelected();e._year=null===e.year||isNaN(e.year)?(new Date).getFullYear():e.year,e._month=null===e.month||isNaN(e.month)?(new Date).getMonth():e.month,e.showWeeks=t.showWeeks,e.weekDays=t.day_labels,e.isDate=function(e){return e instanceof Date},e.selectDate=function(e){n(e)},e.previousMonth=function(){0===e._month?(e._month=11,e._year=e._year-1):e._month=e._month-1,e.render()},e.nextMonth=function(){11===e._month?(e._month=0,e._year=e._year+1):e._month=e._month+1,e.render()},e.render=function(){var n=a.processDateIntervals(e._year,e._month);e.monthLabel=t.month_labels[n.firstDate.getMonth()],e.yearLabel=n.firstDate.getFullYear(),e.dates=[];for(var r=0;r<n.days.length;r++)e.dates.push(new Date(n.firstDate.getFullYear(),n.firstDate.getMonth(),n.days[r]));if(0!==n.firstDate.getDay())for(var s=0;s<n.firstDate.getDay();s++)e.dates.unshift({day:s});if(e.dates.length%7!==0)for(var i=e.dates.length%7,o=0;7-i>o;o++)e.dates.push({day:o});e.dates=e.dates},e.render()}}}])}();